# 1 wxml-->html
## 1.1 {{ }} -->插入 / 绑定

## 1.2 if -else 
wx: if/ wx: elif  / wx: else
![[Pasted image 20220920195426.png]]
## 1.3 hidden
![[Pasted image 20220920195709.png]]

## 1.4 wx: for-->for
如果遍历的是 obj, key 不能用\* this, 最好用 id   
### 1.4.1 key 的作用
小程序也使用了虚拟 DOM
绑定 key 可以在插入、删除一个新的节点时，更好地复用节点；
- string (循环列表中的某个 property)
- \*this
![[Pasted image 20220920203721.png]]

### 1.4.2 item 和 index 重命名
wx: for-item="aa " wx: for-index="bb"
![[Pasted image 20220920202922.png]]



![[Pasted image 20220920140132.png]]

![[Pasted image 20220920140141.png]]

## 1.5 block-->template
需要包裹元素但不希望渲染时使用, 如遍历, 判断







# 2 wxss-->css
行内样式、页面样式、全局样式
选择器: 
- . class, 
- # id , 
- element, 
- element1, element2 (并集选择器)
- :: after
- :: before
## 2.1 权重
![[Pasted image 20220920194451.png]]

自适应单位 rpx
responsive pixel 
iPhone6--> 1px=2rpx
![[Pasted image 20220920194649.png]]
# 3 wxs-->js
（WeiXin Script）
. wxml 中不能直接调用. js 中定义的函数, 因此需要 wxs

## 3.1 使用
- 写在\<wxs>\</wxs>标签中
- 写在. wxs 结尾的文件中导入

每一个 . wxs 文件和标签都是一个单独的模块, 都有自己独立的作用域
要想对外暴露其内部的私有变量与函数，只能通过 module. exports (commonjs) 实现

![[Pasted image 20220920213527.png]]

wxs 写在 wxml 中时, 都是由 webview 解析 (单线程), 效率更高, 在 ios 中效率提高明显
不宜在 wxml 的 wxs 中写过于复杂的逻辑, 否则容易造成卡顿




-----
# 4 练习
## 4.1 币种+总价
![[Pasted image 20220920213239.png]]
cc. wxml
```html
<!--pages/cc/cc.wxml-->
<text>pages/cc/cc.wxml</text>

<!-- 方式一 :标签编写函数-->
<!-- <wxs module="currency">
  function currency(price){
    return "¥"+ price
  }
  module.exports = {
    currency:currency
  }
</wxs> -->
<!-- 方式二: 独立wxs引入 -->
<wxs module="currency" src='/utils/currency.wxs'></wxs>
<wxs module="calculate" src='/utils/calculate.wxs'></wxs>

<view>
  <block wx:for="{{books}}" wx:key="id"> 
      <view>name:{{item.name}}-{{currency.currency(item.price)}}</view>
  </block>
  <view>total: {{calculate.calcPrice(books)}}</view>
</view>
```
utils-->currency
```js
function currency(price){
  return "¥"+ price
}
module.exports = {
  currency:currency
}
```
utils-->calculate
```js
function calcPrice(books){
  return "¥" + books.reduce(function(preValue,item){
    return preValue + item.price
  },0)
}
module.exports = {
  calcPrice:calcPrice
}
```

## 4.2 数字简写为万
cc. wxml
```html
<view>quantity: {{quantity}} </view>
<view>quantity: {{ten_thousand.quantity(quantity)}} </view>
```

utils-->ten_thousand. wxs
```js
function quantity(quantity){
  quantity=Number(quantity)
  if(quantity>=100000000){
    return(quantity/100000000).toFixed(2)+"亿"
  }else if(quantity>=10000){
    return (quantity/10000).toFixed(2)+"万"
  }else{
    return quantity
  }
}
module.exports = {
  quantity:quantity
}
```

## 4.3 音乐播放时间
cc. wxml
```html
<view> ------音乐播放时间-------</view>
<view>
  {{currentTime}}/{{duration}}
  {{music.musicTime(currentTime)}}/{{music.musicTime(duration)}}

</view>
```

utils-->musicTime. wxs
```js
function padLeft(time){
  time = time + ""
  // 假如长度为1, 001-->从第一位截取-->01,  假如长度为2, 0022-->从第二位截取-->22
  return ("00"+time).slice(time.length)
}

function musicTime(time){
 var minite = Math.floor(time/60)
 var second = Math.floor(time) % 60
  return padLeft(minite) + ":" + padLeft(second)
}
module.exports = {
  musicTime:musicTime
}
