# 1 组件使用
## 1.1 创建组件
![[Pasted image 20220921152013.png]]
注意: 组件和页面所在项目根目录名不能以“wx-”为前缀，否则会报错。

新建 component 后 .json 文件中会自动加有以下代码
```json
{
  "component": true,
  "usingComponents": {}
}
```
## 1.2 使用
- 在父组件的. json 文件中注册组件  T
```json
{
  "usingComponents": {
    "a-basic": "/components/a-basic/a-basic"
  }
}
```
	如果子组件需要全局使用就在 app. json 全局注册
	
![[Pasted image 20220921154443.png]]
- 在父组件 wxml中
```html
<!--pages/ee/ee.wxml-->
<text>pages/ee/ee.wxml</text>

<view>
  <a-basic></a-basic>
  <a-basic></a-basic>
  <a-basic></a-basic>
</view>
```
- 子组件的js文件中可以定义数据或逻辑


## 组件作用域
### 组件对外部页面
- 组件样式默认不能改变外部页面样式 (子不改父)
- 组件内不能使用 id# , 属性, 标签选择器
### 外部页面对组件
- 外部使用标签选择器会改变组件样式
- 外部使用类 /id/属性选择器不会改变组件样式
### 让类选择器可以相互影响
isolated 默认
aplly-shared 父可改子
shared 父子互通
```js
// pages/components/a-basic/a-basic.js
Component({
  options:{
    styleIsolation:"isolated",//default
    styleIsolation:"apply-shared",//父可改子
    styleIsolation:"shared"//父子互通
  },
```


# 组件通讯
很多情况下，组件内展示的内容（数据、样式、标签），并不是在组件内写死的，而是由使用者来决定。
![[Pasted image 20220921160432.png]]
## properties--传递数据
支持的数据类型
String、Number、Boolean、Object、Array、null（不限制类型）
```js
// pages/ee/ee.js
Page({
  data: {
    cont:"1111"
  },
  })
```

```html
<!--pages/ee/ee.wxml-->
  <!-- 传递数据 -->
  <a-basic title="aaa" content="{{cont}}"></a-basic>
```

```js
// pages/components/a-basic/a-basic.js
Component({
  properties: {
    title:{
      type:String,
      value:"default title"
    },
    content:{
      type:String,
      value:"default content"
    }
  },
```

```html
<!--pages/components/a-basic/a-basic.wxml-->
<view>{{title}}</view>
<view> {{content }} </view>
```

小程序默认值是 value, vue 的默认值是 default 


## externalClasses--传递样式

## methods--传递事件



传递数据时能否在父的 js-->data 中定义-->wxml 中绑定
可以


created
网络请求, 初始化数据, 不能获取dom
attached
获取 dom
dettached
回收