# 网页渲染过程
## 服务器端渲染（SSR，server side render）
客户端发出请求 -> 服务端接收请求并返回相应 HTML 文档 -> 页面刷新，客户端加载新的 HTML 文档；

缺点: 
本质上只是一些数据发生了变化，而此时服务器却要将重绘的整个页面再返回给浏览器加载, 有悖“DRY（ Don‘t repeat yourself ）”, 且会给网络宽带带来不必要的开销, 

解决: AJAX “Asynchronous JavaScript And XML”
(异步的 JavaScript 和 XML)
在不重新刷新页面的情况下与服务器通信，交换数据，或更新页面。
## 前后端分离
![[Pasted image 20220818103654.png]]

![[Pasted image 20220818103717.png]]

# http
HyperText Transfer Protocol
用于分布式、协作式和超媒体信息系统的应用层协议
提供一种发布和接收 HTML 页面的方法；
HTTP 是一个客户端（用户）和服务端（网站）之间请求和响应的标准。
![[Pasted image 20220818104015.png]]

## 组成
一次 HTTP 请求主要包括：请求（Request）和响应（Response）
![[Pasted image 20220818104101.png]]
![[Pasted image 20220818104133.png]]
## 版本
- 0.9 (1991): 只有 get
- 1.0 (1996): 增加 post, head, 支持请求头、响应头等，支持更多种数据类型 (不再局限于文本数据) ；
- 1.1 (1997): 增加 put, delete , 持久连接 (keep-alive) 请求处理完成后不会立即断开 TCP 连接，减少性能损耗；
- 2.0 (2015)

## 请求方式
- get  请求数据
- head 与 get 相似但没有响应体
如在准备下载一个文件前，先获取文件的大小，再决定是否进行下载；
- post 提交资源
	格式:  
	1 x- www-form-urlencoded格式        
	2 FormData 格式 
	3 JSON 格式
- put 类似 post 但是会替换目标资源
- delete 删除指定资源
- patch 修改资源
- connect 代理服务器用
- trace 追踪资源路径/测试

## 请求响应内容
请求
![[Pasted image 20220818105210.png]]
响应
![[Pasted image 20220818105221.png]]
### 请求头 Request Header
![[Pasted image 20220818105431.png]]
accept：告知服务器，客户端可接受文件的格式类型；
accept-encoding：告知服务器，客户端支持的文件压缩格式，比如 js 文件可以使用 gzip 编码，对应 . gz 文件；
content-length：文件的大小长度
conten-type : (这次请求携带的数据类型)
-  application/x- www-form-urlencoded ：表示数据被编码成以 '&' 分隔的键 - 值对，同时以 '=' 分隔键和值 
-  application/json：表示是一个 json 类型； 
-  text/plain：表示是文本类型； 
-  application/xml：表示是 xml 类型； 
-  multipart/form-data：表示是上传文件；

### 响应头 Response Header
![[Pasted image 20220818110117.png]]

### 通用 general
![[Pasted image 20220818110341.png]]
### 响应状态码 (status code)
https://developer.mozilla.org/zh-CN/docs/web/http/status
![[Pasted image 20220818110528.png]]
获取状态
status, statusText
![[Pasted image 20220818113112.png]]
# AJAX
异步的 JavaScript 和 XML（Asynchronous JavaScript And XML）
它可以使用 JSON，XML，HTML 和 text 文本等格式发送和接收数据；
## AJAX 请求
1. 创建网络对象
2. 监听 XMLHttpRequest 对象状态 (或 onload 监听加载完成) 变化
3. open (配置网络请求)
4. send
![[Pasted image 20220818202005.png]]
## AJAX 请求对象的状态
![[Pasted image 20220818111556.png]]

## 请求参数的传递
1. get---query
2. post -> urlencoded
3. post---formData
4. post---json
![[Pasted image 20220818205154.png]]
## XMLHttpRequest (xhr) 的事件监听
-  loadstart：请求开始。 
-  progress： 一个响应数据包到达，此时整个 response body 都在 response 中。 
-  abort：调用 xhr. abort () 取消了请求。 
-  error：发生连接错误，例如，域错误。不会发生诸如 404 这类的 HTTP 错误。 
-  load：请求成功完成。 
-  timeout：由于请求超时而取消了该请求（仅发生在设置了 timeout 的情况下）。
-  loadend：在 load，error，timeout 或 abort 之后触发。

## XMLHttpRequest (xhr) 的响应
response 属性返回响应的正文内容；
responseType 返回数据类型
" "---- text
"json"----json
"xml"----xml

# fetch
fatch 是早期的 XMLHttpRequest 的替代方案, 比fetch更好的方案 axios
fetch 比 XMLHttpRequest 的优点
- 返回值是一个 Promise,
- 不像 XMLHttpRequest 一样，所有的操作都在一个对象上；

![[Pasted image 20220818130907.png]]
 input：定义要获取的资源地址，可以是一个 URL 字符串，也可以使用一个 Request 对象（实验性特性）类型
 init：其他初始化参数
	✓ method: 请求使用的方法，如 GET、POST；
	✓ headers: 请求的头信息； 
	✓ body: 请求的 body 信息

### fetch response
1. 服务器返回响应
2. 获取响应体 (response body)
	response. text ( )
	response. json ( )


# axios

# 文件上传
XMLHttpRequest 文件上传
Fetch 也支持文件上传，但是 Fetch 没办法监听进度。